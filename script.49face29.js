parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"zrc5":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=function t(n,i){var o=this;e(this,t),r(this,"getHeroes",function(){return o.model.getHeroes()}),r(this,"renderHeroesList",function(e){0!==e.length&&Promise.resolve(e).then(function(e){return o.view.renderHeroesList(e)}).then(function(e){return o.displayHeroesList(e)}).catch()}),r(this,"renderHeroCard",function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null!=r?Promise.resolve(e).then(function(e){return o.model.getHero(e,r)}):Promise.resolve(e).then(function(e){return o.model.getRandomHero(e)})).then(function(e){return o.view.renderHero("big",e)}).then(function(e){return o.displayBigHero(e)})}),r(this,"displayBigHero",function(e){var r=o.resultDiv.querySelector(".hero-card__big");r?o.resultDiv.replaceChild(e,r):o.resultDiv.insertAdjacentElement("afterbegin",e)}),r(this,"displayHeroesList",function(e){var r=o.resultDiv.querySelector(".hero-list__slider");r.innerHTML="",r.append(e)}),r(this,"renderSimilarHeroes",function(e){var r=o.getHeroes().then(function(r){return o.model.calculateSimilarity(r,e)});r.then(function(e){return o.renderHeroCard(e,e[0].id)}),r.then(function(e){return o.renderHeroesList(e)})}),r(this,"formFilterHandler",function(e){switch(e.value){case"all":o.state[e.name]=null;break;default:o.state[e.name]=e.value}var r=o.getHeroes().then(function(e){return o.model.filterFromState(e,o.state)});r.then(function(e){return o.renderHeroCard(e)}),r.then(function(e){return o.renderHeroesList(e)})}),r(this,"resetFilter",function(){o.state={house:null,gender:null,name:null,staff:null,isAlive:null};var e=o.getHeroes();e.then(function(e){return o.renderHeroCard(e)}),e.then(function(e){return o.renderHeroesList(e)})}),this.model=n,this.view=i,this.resultDiv=document.querySelector(".results"),this.state={house:null,gender:null,name:null,hogwarts:null,isAlive:null},this.getHeroes().then(function(e){return o.renderHeroCard(e)}),this.getHeroes().then(function(e){return o.model.getRandomHeroes(e)}).then(function(e){return o.renderHeroesList(e)})},n=t;exports.default=n;
},{}],"l9pR":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var s=function s(a){var r=this,i=a.name,o=a.dateOfBirth,n=a.eyeColour,h=a.hairColour,u=a.gender,f=a.hogwartsStaff,c=a.hogwartsStudent,l=a.house,g=a.image,d=a.patronus,w=a.species,p=a.alive,m=a.actor;t(this,s),e(this,"fromHogwarts",function(){return!(!r.hogwartsStaff&&!r.hogwartsStudent)}),e(this,"assignHoggwarts",function(){switch(r.fromHogwarts()){case!0:switch(r.hogwartsStaff){case!0:return"staff";default:return"student"}default:return""}}),this.name=i,this.dateOfBirth=o,this.eyeColour=n,this.hairColour=h,this.gender=u,this.hogwartsStaff=f,this.hogwartsStudent=c,this.hogwarts=this.assignHoggwarts(),this.house=l,this.patronus=d,this.species=w,this.image="".concat(g.slice(0,4),"s").concat(g.slice(4)),this.alive=p,this.actor=m,this.id=null},a=s;exports.default=a;
},{}],"kRZE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./hero.js"));function t(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return a(e)||i(e,t)||o(e,t)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,u=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(c){o=!0,u=c}finally{try{n||null==a.return||a.return()}finally{if(o)throw u}}return r}}function a(e){if(Array.isArray(e))return e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var d="https://hp-api.herokuapp.com/api/characters",y=function(){function t(e){var n=this;c(this,t),l(this,"getHeroes",function(){return n.heroes}),l(this,"constructHeroesList",function(e){return t.$constructHeroesList(e)}),l(this,"getRandomHero",function(e){return t.getRandomHero(e)}),l(this,"getRandomHeroes",function(e){return t.getRandomHeroes(e)}),l(this,"getHero",function(e,r){return t.getHero(e,r)}),l(this,"filterFromState",function(e,t){return Object.entries(t).reduce(function(t,n){return t.then(function(t){if(null!==n[1]){var o=r(n,2),u=o[0],i=o[1],a=t.filter(function(e){switch(u){case"alive":return e[u]===!!i;case"name":return e[u].toLowerCase().includes(i.toLowerCase());default:return e[u].toLowerCase()===i.toLowerCase()}});return new Promise(function(e,t){return e(a)})}return new Promise(function(t,r){return t(e)})})},Promise.resolve(e))}),l(this,"filterByHouse",function(e,r){return t.filterByHouse(e,r)}),l(this,"filterByHogwarts",function(e,r){return t.filterByHogwarts(e,r)}),l(this,"filterByGender",function(e,r){return t.filterByGender(e,r)}),l(this,"filterByName",function(e,r){return t.filterByName(e,r)}),l(this,"calculateSimilarity",function(e,r){return t.calculateSimilarity(e,r)}),this.url=e,this.heroes=this.getheroesFromServer()}return f(t,[{key:"getheroesFromServer",value:function(){var e=this;return new Promise(function(t,r){var n=new XMLHttpRequest;n.responseType="json",n.open("GET",e.url),n.addEventListener("load",function(){200!==n.status&&(alert("Cannot load dataHeroes ".concat(n.status,": ").concat(n.statusText,". Please, reload")),r()),t(n.response)}),n.addEventListener("error",function(){alert("Cannot load dataHeroes ".concat(n.status,": ").concat(n.statusText,". Please, reload")),r()}),n.send()}).then(function(t){return e.constructHeroesList(t)})}}],[{key:"$constructHeroesList",value:function(t){var r=1;return t.map(function(t){var n=new e.default(t);return n.id=r,r+=1,n})}},{key:"getRandomHero",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"getRandomHeroes",value:function(e){for(var t=new Set;t.size<5;){var r=Math.floor(Math.random()*e.length);t.add(e[r])}return Array.from(t)}},{key:"getHero",value:function(e,t){return e.find(function(e){return e.id===t})}},{key:"filterByHouse",value:function(e,t){return"hogwards"===t?e:e.filter(function(e){return"faculty"===e.house})}},{key:"filterByHogwarts",value:function(e,t){return""===t?e.filter(function(e){return!e.fromHogwarts()}):e.filter(function(e){return e.hogwarts})}},{key:"filterByGender",value:function(e,t){return e.filter(function(e){return e.gender===t})}},{key:"filterByName",value:function(e,t){return""===t?e:e.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())})}},{key:"calculateSimilarity",value:function(e,t){var n={};return Object.entries(t).forEach(function(t){var o=r(t,2),u=o[0],i=r(o[1],2),a=i[0],c=i[1];e.filter(function(e){return e[u]===a}).forEach(function(e){e.id in n?n[e.id]+=c:n[e.id]=c})}),(n=Object.entries(n)).sort(function(e,t){return t[1]-e[1]}),(n=(n=n.map(function(e){return e[0]})).map(function(t){return e.find(function(e){return e.id===+t})})).slice(0,6)}}]),t}(),h=new y(d),m=h;exports.default=m;
},{"./hero.js":"l9pR"}],"kWCP":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function n(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(){function r(){e(this,r),n(this,"renderHero",function(e,t){return r.renderHero(e,t)}),n(this,"generateOccupation",function(e){return r.generateOccupation(e)}),n(this,"renderHeroeSmall",function(e,t){return r.renderHeroeSmall(e,t)}),n(this,"renderHeroBig",function(e,t){return r.renderHeroBig(e,t)}),n(this,"renderHeroesList",function(e){return r.renderHeroesList(e)})}return t(r,null,[{key:"renderHero",value:function(e,t){var n=document.querySelector("#".concat(e,"Hero")).content.querySelector(".hero-card__".concat(e)).cloneNode(!0);return n=r.renderHeroeSmall(t,n),"big"===e&&(n=r.renderHeroBig(t,n)),n.dataset.id=t.id,n}},{key:"generateOccupation",value:function(e){var r="";return e.fromHogwarts()?e.hogwartsStaff?r+="Professor of ":r+="Student of ":r+="Not from ",r+="Hogwarts",e.house&&(r+=", ".concat(e.house)),r+="."}},{key:"renderHeroeSmall",value:function(e,t){var n=t.cloneNode(!0),o=n.querySelector(".card-img");return o.src=e.image,o.alt=e.name,n.querySelector(".card-title").textContent=e.name,n.querySelector(".hero-name").textContent=e.name,n.querySelector(".hero-birth-date").textContent=e.dateOfBirth,n.querySelector(".hero-occupation").textContent=r.generateOccupation(e),n}},{key:"renderHeroBig",value:function(e,r){var t=r.cloneNode(!0);return t.querySelector(".hero-eyes").textContent=e.eyeColour,t.querySelector(".hero-hair").textContent=e.hairColour,t.querySelector(".hero-patronus").textContent=e.patronus,t.querySelector(".hero-actor").textContent=e.actor,t}},{key:"renderHeroesList",value:function(e){var t=document.createDocumentFragment();return e.forEach(function(e){return t.append(r.renderHero("small",e))}),t}}]),r}(),a=o;exports.default=a;
},{}],"10wz":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=15,s=function s(){var l=this;e(this,s),t(this,"sliderMove",function(e){var t=l.slider.querySelector(".hero-card__small").offsetWidth+r,s=+e.dataset.dir,i=Math.round(l.sliderWidth/t),n=t*l.slider.children.length,d=l.slider.style.left?parseInt(l.slider.style.left,10):0;Math.abs(d+s*t)>n-(1===i?i:i-1)*t?l.slider.style.left="0px":l.slider.style.left=d+s*t>0?"-".concat((l.slider.children.length*t-i*t)*s,"px"):"".concat(d+t*s,"px")}),t(this,"cardHandler",function(e){var t=e.closest("div");return!!t.classList.contains("hero-card__small")&&+t.dataset.id}),this.sliderButtons=document.querySelectorAll(".btn-list"),this.slider=document.querySelector(".hero-list__slider"),this.sliderWidth=this.slider.offsetWidth},l=s;exports.default=l;
},{}],"uNpv":[function(require,module,exports) {
"use strict";function t(t){return n(t)||r(t)||o(t)||e()}function e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(t,e):void 0}}function r(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function n(t){if(Array.isArray(t))return a(t)}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var d=function e(){var o=this;i(this,e),l(this,"modalFormHandler",function(){o.modalWindow.classList.remove("modal-closed"),o.modalWindow.classList.add("modal-open"),o.modalWindow.querySelector(".btn-modal").addEventListener("click",function(){return o.closeModal()})}),l(this,"closeModal",function(){o.modalWindow.classList.add("modal-closed"),o.modalWindow.classList.remove("modal-open")}),l(this,"modalFormSubmit",function(){var e={};return t(o.form.elements).forEach(function(t){"radio"===t.type&&t.checked&&(e[t.name]=[t.value,+t.dataset.score])}),e}),this.modalWindow=document.querySelector(".modal"),this.form=this.modalWindow.querySelector(".similarity-form"),this.findButton=document.querySelector(".btn-find")},c=d;exports.default=c;
},{}],"L4bL":[function(require,module,exports) {
"use strict";var e=o(require("./controller.js")),r=o(require("./model.js")),t=o(require("./view.js")),n=o(require("./slider.js")),i=o(require("./modalForm.js"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var a=function o(){var a=this;l(this,o),d(this,"addListeners",function(){a.facultyForm.addEventListener("input",a.filterFormHandler),a.filterForm.addEventListener("input",a.filterFormHandler),a.resetBtn.addEventListener("click",a.resetHandler),a.slider.sliderButtons.forEach(function(e){return e.addEventListener("click",function(e){var r=e.target;a.slider.sliderMove(r)})}),a.slider.slider.addEventListener("click",function(e){var r=e.target,t=a.slider.cardHandler(r,a);a.controller.getHeroes().then(function(e){return a.controller.renderHeroCard(e,t)})}),a.modalWindow.findButton.addEventListener("click",a.modalWindow.modalFormHandler),a.modalWindow.form.addEventListener("submit",function(e){e.preventDefault();var r=a.modalWindow.modalFormSubmit();a.controller.renderSimilarHeroes(r),a.modalWindow.closeModal()})}),d(this,"filterFormHandler",function(e){var r=e.target;a.controller.formFilterHandler(r)}),d(this,"resetHandler",function(){a.controller.resetFilter()}),this.controller=new e.default(r.default,new t.default),this.slider=new n.default,this.modalWindow=new i.default,this.facultyForm=document.querySelector(".faculty-form"),this.filterForm=document.querySelector(".filter-form"),this.resetBtn=document.querySelector(".btn-reset")},s=new a;s.addListeners();
},{"./controller.js":"zrc5","./model.js":"kRZE","./view.js":"kWCP","./slider.js":"10wz","./modalForm.js":"uNpv"}]},{},["L4bL"], null)
//# sourceMappingURL=script.49face29.js.map